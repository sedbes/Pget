# Pget
一个 PHP 版的 Wget，A PHP implementation of Wget

主要的特点：解决 Windows 中文环境中原路径保存中文网址时乱码问题。

带日志文件，从中断恢复更方便

其它情况下 Wget 性能更好。

<p><br />一个 PHP 版的 Wget，面向对象重构版。仅下载 HTTP,HTTPS,FTP 文件<br />使用了内存做缓存<br />版本：2.0<br />作者：icos</p>
<p>用法示例：<br />php pget.php --recursive --adjust-extension --restrict-file-names --no-check-certificate --tries=10 --wait=0.5 --save-cookies="cookie" --user-agent="Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)" --reject-regex="\?|#|&amp;|(?:\.rar)|(?:\.zip)|(?:\.epub)|(?:\.txt)|(?:\.pdf)" --reject="woff,jpg,png,webp" --accept="html,js,css" --sub-string="&lt;p id=\"b\"&gt;,&lt;p class=\"a b\"&gt;|&lt;/p&gt;,&lt;/p&gt;" https://domain/<br />php pget.php https://domain/link<br />php pget.php --input-file="urls.txt"</p>
<p>Pget 使用 pdo_sqlite 记录请求过的链接。</p>
<p>参数说明：<br />&nbsp; url &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;请求的URL，或用 --start-url="domain"<br />&nbsp; --mirror &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 镜像整个网站。0表示只下载单个URL<br />&nbsp; --input-file &nbsp; &nbsp; &nbsp; &nbsp; 包含URL的文件路径，每行一个URL，批量下载<br />&nbsp; --no-clobber &nbsp; &nbsp; &nbsp; &nbsp; 不覆盖已存在的本地文件，否则覆盖<br />&nbsp; --directory-prefix &nbsp; 文件保存目录，默认以主机名为子目录<br />&nbsp; --reject &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 拒绝的文件后缀，逗号分隔<br />&nbsp; --accept &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 接受的文件后缀，逗号分隔<br />&nbsp; --accept-regex &nbsp; &nbsp; &nbsp; 接受URL的正则表达式<br />&nbsp; --reject-regex &nbsp; &nbsp; &nbsp; 拒绝URL的正则表达式<br />&nbsp; --sub-string &nbsp; &nbsp; &nbsp; &nbsp; 内容截取，"|"分隔查找和替换，","分隔多组。含空格或引号需转义。Pget独有的开关<br />&nbsp; --wait &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 每次操作间隔秒数（或微秒）<br />&nbsp; --no-verbose &nbsp; &nbsp; &nbsp; &nbsp; 不输出日志信息<br />&nbsp; --utf-8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;转为UTF-8编码，默认开启<br />&nbsp; --recursive &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;递归下载页面内所有链接，默认关闭<br />&nbsp; --page-requisites &nbsp; &nbsp;下载页面依赖的图片、CSS、JS等资源，默认关闭<br />&nbsp; --directory-prefix &nbsp; 文件保存目录，默认当前目录<br />&nbsp; --no-parent &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;递归时不向上级目录爬取<br />&nbsp; --span-hosts &nbsp; &nbsp; &nbsp; &nbsp; 递归时允许跨主机爬取<br />&nbsp; --domains &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;允许爬取的域名，逗号分隔，不自动开启-H<br />&nbsp; --adjust-extension &nbsp; HTML文件无.html后缀时自动补全<br />&nbsp; --restrict-file-names &nbsp;转义非ASCII和特殊字符，兼容Win/Linux路径<br />&nbsp; --output-file &nbsp; &nbsp;输出日志到文件<br />&nbsp; --save-cookies，--load-cookies &nbsp; &nbsp; &nbsp; 写入和载入cookies，配置一个即可，目前它们公用一个文件，因此不要配置成不同的文件名<br />&nbsp; --force-directories &nbsp; &nbsp;强制创建目录结构，默认开启<br />&nbsp; --no-directories &nbsp; &nbsp; 递归检索时不要创建目录层次结构<br />&nbsp; --tries &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 重试次数，默认20次&nbsp;<br />&nbsp; --retry-connrefused &nbsp; &nbsp;强制重试连接被拒绝的请求，默认开启<br />&nbsp; --remote-encoding &nbsp;远程编码，默认UTF-8<br />&nbsp; --local-encoding &nbsp;本地编码，默认UTF-8<br />&nbsp; --level &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 递归深度，默认5级</p>
<p>A PHP implementation of Wget, object-oriented refactored version. Only surports HTTP,HTTPS,FTP<br />cache in memory<br />Version: 2.0<br />Author: icos</p>
<p>Usage examples:<br />php pget.php --recursive --wait=0.5 --reject="woff,jpg,png,webp" --accept="html,js,css" --reject-regex="\?|(?:\/down\/)" --sub-string="&lt;p id=\"b\"&gt;,&lt;p class=\"a b\"&gt;|&lt;/p&gt;[,&lt;/p&gt;]" https://domain/<br />php pget.php https://domain/link<br />php pget.php --input-file="urls.txt"</p>
<p>Pget uses pdo_sqlite to store links for request records.</p>
<p>Parameters:<br />&nbsp; url &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;The request URL, or use --start-url="domain"<br />&nbsp; --mirror &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Copy the whole website. 0 means only download a single URL.<br />&nbsp; --input-file &nbsp; &nbsp; &nbsp; &nbsp; Path to a file containing URLs, one per line. All URLs will be downloaded.<br />&nbsp; --no-clobber &nbsp; &nbsp; &nbsp; &nbsp; Do not overwrite existing local files; otherwise, overwrite.<br />&nbsp; --directory-prefix &nbsp; Directory to store files. Default is a subdirectory named after the hostname.<br />&nbsp; --reject &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Comma-separated list of file suffixes to reject.<br />&nbsp; --accept &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Comma-separated list of file suffixes to accept.<br />&nbsp; --accept-regex &nbsp; &nbsp; &nbsp; Regular expression to accept URLs.<br />&nbsp; --reject-regex &nbsp; &nbsp; &nbsp; Regular expression to reject URLs.<br />&nbsp; --sub-string &nbsp; &nbsp; &nbsp; &nbsp; Cut content. Use "|" to split search and replace, "," to split cells. Use cmd escape for quotes or spaces.<br />&nbsp; --wait &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Seconds (or microseconds) between actions.<br />&nbsp; --no-verbose &nbsp; &nbsp; &nbsp; &nbsp; Suppress output messages.<br />&nbsp; --utf-8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Convert content to UTF-8. Default is on.<br />&nbsp; --recursive &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Download all links in the page. Default is off.<br />&nbsp; --page-requisites &nbsp; &nbsp;Download images, CSS, JS for HTML display. Default is off.<br />&nbsp; --directory-prefix &nbsp; Save files to this directory. Default is current directory.<br />&nbsp; --no-parent &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Do not ascend to parent directory when recursively retrieving.<br />&nbsp; --span-hosts &nbsp; &nbsp; &nbsp; &nbsp; Enable spanning across hosts when recursively retrieving.<br />&nbsp; --domains &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Comma-separated list of domains to follow. Does not enable -H.<br />&nbsp; --adjust-extension &nbsp; For HTML files without .html extension, append .html.<br />&nbsp; --restrict-file-names &nbsp;Escape non-ASCII and special chars for cross-platform compatibility.<br />&nbsp; --output-file<br />&nbsp; --save-cookies，--load-cookies<br />&nbsp; --force-directories &nbsp; &nbsp;create a hierarchy of directories.<br />&nbsp; --no-directories &nbsp; Do not create a hierarchy of directories when retrieving recursively.<br />&nbsp; --tries &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Number of retries. Default is 20.<br />&nbsp; --retry-connrefused &nbsp; &nbsp;Force retry on connection refused. Default is on.<br />&nbsp; --remote-encoding &nbsp;Remote encoding. Default is UTF-8.<br />&nbsp; --local-encoding &nbsp; Local encoding. Default is UTF-8.</p>
